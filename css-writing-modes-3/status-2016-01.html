<!DOCTYPE html>
<meta charset="utf-8">
<title>Status of CSS Writing Modes Level 3 Test Suites as of 2016-01</title>
<style>
.css {
  font-family: monospace;
  quotes: "'" "'";
  text-decoration: none;
}
.css::before {
  content: open-quote;
}
.css::after {
  content: close-quote;
}
</style>
<body>
<h1>Status of CSS Writing Modes Level 3 Test Suites</h1>
<h2>Test Failures</h2>
<p>
  This document analyzes
  <a href="http://test.csswg.org/harness/results/css-writing-modes-3_dev/grouped/filter/17/">tests
  that do not meet the exit criteria and are not required</a> as of Jan 2016.
  See <a href="#links">links</a> below for other data and links.
<ul>
  <li><b>1: Introduction to Writing Modes:</b>
    all failures are for <a class=css>sideways-lr</a> or <a class=css>sideways-rl</a>.
  <li><b>2: Inline Direction and Bidirectionality:</b>
    all failures are for
    <a class=css>isolate-override</a> or <a class=css>plaintext</a> value
    of the <a class=css>unicode-bidi</a> property.
  <li><b>2.1: Specifying Directionality: the direction property</b>
    has 2 types of failures:
    <ul>
      <li>6 out of 8 failures are for <a class=css>sideways-lr</a> or <a class=css>sideways-rl</a>.
      <li>2 failures are about the table cell ordering of:
        <ul>
          <li><a class=css>vertical-rl</a> or <a class=css>vertical-lr</a>
          <li>and RTL
          <li>and <a class=css>text-orientation: upright</a>
        </ul>
    </ul>
  <li><b>2.2: Embeddings and Overrides: the unicode-bidi property:</b>
    only 1 implementation has unprefixed values for <a class=css>unicode-bidi</a> property.
    Note that other layout tests run with prefix support.
  <li><b>2.4.2: CSS–Unicode Bidi Control Translation, Text Reordering:</b>
    2 failures are about bidi reordering of RLO/PDF bidi control characters.
    The tests cannot diagnose if this is a failure of the mapping in CSS
    or a failure in underlying UAX#9 implementations.
    No implementations pass these 2 tests.
  <li><b>2.4.5: Reordering-induced Box Fragmentation:</b>
    the same tests as 2.4.2.
  <li><b>3.1: Block Flow Direction: the writing-mode property</b>
    has 3 types of failures:
    <ul>
      <li>6 are for <a class=css>sideways-lr</a> or <a class=css>sideways-rl</a>.
      <li>2 are the same tests as 2.1.
      <li>1 is flexbox <a class=css>row-reverse</a>.
    </ul>
  <li><b>4.2: Text Baselines:</b>
    all failures are for <a class=css>sideways-lr</a> or <a class=css>sideways-rl</a>.
  <li><b>4.3: Atomic Inline Baselines</b>
    has two types of failures:
    <ul>
      <li>5 are
        <ul>
          <li><a class=css>vertical-lr</a>
          <li>and multiple lines in inline-block/inline-table.
        </ul>
      <li>2 are for <a class=css>sideways-lr</a> or <a class=css>sideways-rl</a>.
    </ul>
  <li><b>5.1: Orienting Text: the text-orientation property</b>
    has 3 types of failures:
    <ul>
      <li>5 are for <a class=css>sideways-lr</a> or <a class=css>sideways-rl</a>.
      <li>2 are the same tests as 2.1 and 3.1.
      <li>16 tests use <a class=css>getBoundingClientRect()</a> API
        to measure orientations of characters after layout,
        and Gecko failures are because of the API implementation.
        Since Gecko passes ref tests and manual tests for this section,
        I consider these 16 failures are irrelevant.
    </ul>
  <li><b>7.1: Principles of Layout in Vertical Writing Modes</b>
    has 2 types of failures:
    <ul>
      <li>4 are for <a class=css>sideways-lr</a> or <a class=css>sideways-rl</a>.
      <li>5 are orthogonal absolute-positioned objects.
        There are 270 tests for absolute-positioned objects in this spec
        to cover combinations of a) direction,
        b) text-align,
        c) box offsets (top, left, right, bottom, auto),
        d) orthogonal and non-orthogonal,
        and e) ICB.
        5 failures is ~1.8% of total cases,
        and all of them are for orthogonal flows.
    </ul>
  <li><b>7.5: Line-Relative Mappings:</b>
    all failures are for <a class=css>sideways-lr</a> or <a class=css>sideways-rl</a>.
  <li><b>9.1: Horizontal-in-Vertical Composition: the text-combine-upright property</b>
    <ul>
      <li>Only 1 unprefixed implementation for <a class=css>none</a> and <a class=css>all</a>.
        Note that other layout tests run with prefix and old syntax support.
      <li>0 implementations for <a class=css>digits</a> with the up-to-date syntax.
        Note that Trident/Edge has <a class=css>digits</a> in the pre-CR name with prefix
        (<a class=css>-ms-text-combine-horizontal</a>).
    </ul>
  <li><b>9.1.3.1: Full-width Characters:</b>
    all tests fail in all implementations.
</ul>

<h2>List of Non-interoperable Items</h2>
<ol>
  <li>1 unprefixed implementation pass
    all tests for <a class=css>unicode-bidi: isolate-override</a> and <a class=css>plaintext</a>.
    [2]
  <li>0 implementations for
    the ordering of RTL scripts in vertical flow
    when upright glyphs is specified (<a class=css>text-orientation: upright</a>).
    [2.1]
  <li>1 unprefixed implementation for
    new values of <a class=css>unicode-bidi</a> in L3
    (<a class=css>isolate</a>, <a class=css>isolate-override</a>, <a class=css>plaintext</a>).
    [2.2]
  <li>0 implementations for
    baseline of multiple lines in inline-block/inline-table in <a class=css>vertical-lr</a>.
    [4.3]
  <li>1 implementation for 1.8% of combinations of
    absolute positioned objects with orthogonal writing-modes.
    [7.1]
  <li>1 unprefixed implementation for
    <a class=css>text-combine-upright: none | all</a>.
    [9.1]
  <li>0 implementations for
    automatic full-width conversion in <a class=css>text-combine-upright</a>. [9.1.3.1]
</ol>
<h3>Non-interoperable Items with At Risk</h3>
<ol>
  <li>1 unprefixed implementation for
    <a class=css>writing-mode: sideways-lr</a> and <a class=css>sideways-rl</a>.
    [3.1]
  <li>0 unprefixed implementations for
    <a class=css>text-combine-upright: digits</a>.
    [9.1]
</ol>
<h3>Non-interoperable Items in Other Specs</h3>
<ol>
  <li>0 implementations for
    2 speicific test cases of
    bidi control characters in UAX#9. [2.4.2]
  <li>1 implementation for
    Flexbox <a class=css>row-reverse</a>. [3.1]
  <li>1 implementation for
    CSSOM View <a class=css href="https://drafts.csswg.org/cssom-view/#extensions-to-the-range-interface">Range.getBoundingClientRect()</a> method. [5.1]
</ol>
<h2 id="links">Links</h2>
<ul>
  <li><a href="http://test.csswg.org/harness/review/css-writing-modes-3_dev/">CSSWG Test Result View</a>
    <ul>
      <li><a href="http://test.csswg.org/harness/results/css-writing-modes-3_dev/grouped/">All</a>
      <li><a href="http://test.csswg.org/harness/results/css-writing-modes-3_dev/grouped/filter/17/">Required and not meet exit criteria</a>
    </ul>
  <li><a href="http://kojiishi.github.io/generate-w3c-implementation-report/">Blink and WebKit separate view</a>
    <ul>
      <li><a href="http://kojiishi.github.io/generate-w3c-implementation-report/?q=less-than-2">Required and not meet exit criteria</a>
      <li>This view uses the same data, but need to run a script manually to update.
      <li>Coloring criteria is different.
    </ul>
</ul>
</body>
